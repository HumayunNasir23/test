name: Testing git-actions

on:
  push:
    branches:
      - main
  workflow_dispatch:
  
jobs:
  build-push:
    runs-on: ubuntu-latest
    env:
      SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
      
    steps:
    - uses: actions/checkout@v2
      name: Check out code
      
    - name: Get short commit_id
      id: image-tag
      run: echo "sha_short=$(git rev-parse --short HEAD)" >> $GITHUB_OUTPUT
    
    - name: Print short commit_id
      run: echo "Short commit_id is ${{ steps.image-tag.outputs.sha_short }}"

    - name: Confirm git commit SHA output
      run: echo ${{ steps.vars.outputs.short_sha }}

    - name: Get the branch name
      run: echo "BRANCH_NAME=$(echo ${GITHUB_REF#refs/heads/} | tr / -)" >> $GITHUB_ENV
      
